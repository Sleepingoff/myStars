service cloud.firestore {
  match /databases/{database}/documents {
    match /stars/{userId} {
      // Allow anyone to read
      allow read: if true;
      
      // Allow only authenticated users to write (create, update, delete)
      allow write: if request.auth != null;

      // Subcollection userStars
      match /{userId}/{starId} {
        // Allow anyone to read
        allow read: if true;
        
        // Allow only authenticated users to write (create, update, delete)
        allow write: if request.auth != null;
      }
    }
  }
}
